{
  "version": 3,
  "file": "app.css",
  "sources": [
    "../App.svelte",
    "../Article.svelte",
    "../Articles.svelte",
    "../Form.svelte"
  ],
  "sourcesContent": [
    "<script>\n  import Form from './Form.svelte';\n  import Articles from './Articles.svelte';\n  import { user } from './stores.js';\n  import { getSession, deleteSession, createAuth } from '@tridnguyen/auth';\n\n  const auth = createAuth();\n\n  function getUserSession() {\n    const session = getSession();\n    user.set(session || {});\n  }\n\n  function handleVisibilityChange() {\n    if (!document.hidden) {\n      getUserSession();\n    }\n  }\n\n  function login() {\n    auth.silentAuth();\n  }\n\n  function logout() {\n    deleteSession();\n    getUserSession();\n  }\n\n  auth.handleCallback((err) => {\n    if (err) {\n      console.error(err);\n      return;\n    }\n    getUserSession();\n  });\n\n  getUserSession();\n</script>\n\n<svelte:window on:visibilitychange={handleVisibilityChange} />\n\n<main>\n  <h1>Reads</h1>\n  {#if $user.profile}\n    <div class=\"auth\">\n      <button type=\"button\" class=\"logout\" on:click={logout}>Logout</button>\n    </div>\n    <Form />\n  {:else}\n    <div class=\"auth\">\n      <button type=\"button\" class=\"login\" on:click={login}>Login</button>\n    </div>\n  {/if}\n  <Articles />\n</main>\n\n<style>\n  main:before {\n    background-color: var(--primary-color);\n    content: '';\n    width: 100%;\n    height: 10em;\n    position: absolute;\n    top: 0;\n    left: 0;\n    z-index: -1;\n  }\n  h1 {\n    color: var(--primary-color-text);\n    margin: 1rem auto 0;\n    padding: 0.5rem 1rem;\n    width: 100%;\n  }\n  @media (min-width: 37.5em) {\n    h1 {\n      margin: 2rem auto 0;\n      padding: 0.75rem 2rem;\n      width: 80%;\n    }\n  }\n\n  .auth {\n    text-align: right;\n    height: 0; /* hide this div as it's unnecessary */\n  }\n  .auth button {\n    background-color: var(--primary-color-dark);\n    color: var(--primary-color-text);\n    margin-right: 2rem;\n    /* push the button higher up in the banner */\n    transform: translateY(-4rem);\n  }\n  @media (min-width: 37.5em) {\n    .auth {\n      margin: 0 auto;\n      width: 80%;\n    }\n  }\n</style>\n",
    "<script>\n  import { createEventDispatcher } from 'svelte';\n  import { user } from './stores.js';\n  import { deleteJson } from 'simple-fetch';\n\n  const dispatch = createEventDispatcher();\n\n  export let article;\n  let title = 'Click twice to delete article';\n  let deleteClickedOnce = false;\n  async function deleteArticle() {\n    if (!article || !article.id) {\n      console.error('No article to be deleted');\n      return;\n    }\n    if (!deleteClickedOnce) {\n      deleteClickedOnce = true;\n      title = 'Click again to delete article';\n      return;\n    }\n    await deleteJson(`${API_URL}/${COLLECTION}/items/${article.id}`, {\n      headers: {\n        Authorization: `Bearer ${$user.idToken}`\n      }\n    });\n    dispatch('article:deleted', {\n      id: article.id\n    });\n  }\n</script>\n\n<div class=\"article\">\n  {#if $user.profile}\n    <button\n      type=\"button\"\n      class=\"article-remove {deleteClickedOnce ? 'confirm' : ''}\"\n      {title}\n      on:click={deleteArticle}\n      aria-label=\"remove article\"\n      data-confirm=\"false\">\n      <i class=\"material-icons\">delete</i>\n    </button>\n  {/if}\n  <h3 class=\"title\">\n    <a href={article.link}>{article.title}</a>\n  </h3>\n  <div class=\"content\">\n    <p>{article.description}</p>\n  </div>\n</div>\n\n<style>\n  .article {\n    background-color: #fff;\n    border: 1px solid var(--divider-color);\n    flex-basis: 100%;\n    height: 15rem;\n    margin: 1rem 0;\n    padding: 1em 1rem;\n    position: relative;\n  }\n  @media (min-width: 37.5em) {\n    .article {\n      flex-basis: 45%;\n    }\n  }\n  @media (min-width: 65em) {\n    .article {\n      flex-basis: 30%;\n    }\n  }\n  .title {\n    font-weight: 600;\n    font-size: 0.9em;\n    line-height: 1.4;\n    margin: 0 0 0.5em 0;\n    width: calc(100% - 2rem); /* 2rem to accommodate delete icon */\n  }\n  .title a {\n    color: var(--primary-color-dark);\n  }\n  .title a:hover {\n    color: var(--accent-color);\n  }\n  .article-remove {\n    background-color: transparent;\n    border: none;\n    cursor: pointer;\n    opacity: 0.2;\n    position: absolute;\n    top: 0;\n    right: 0;\n  }\n  .article-remove.confirm {\n    color: red;\n  }\n  .article:hover .article-remove {\n    opacity: 0.6;\n  }\n  .article:hover .article-remove:hover {\n    opacity: 1;\n  }\n  .content {\n    height: 10rem;\n    overflow: auto;\n  }\n  .content p {\n    margin: 0;\n  }\n</style>\n",
    "<script>\n  import { onMount } from 'svelte';\n  import { articles } from './stores.js';\n  import { getJson } from 'simple-fetch';\n  import Article from './Article.svelte';\n\n  onMount(async () => {\n    const resp = await getJson(`${API_URL}/${COLLECTION}/items`);\n    resp.sort((a, b) => {\n      // sort by id (which is time)\n      return Number(b.id) - Number(a.id);\n    });\n    articles.update((n) => n.concat(resp));\n  });\n\n  function removeArticle(e) {\n    const articleToDelete = e.detail.id;\n    const deleteIndex = $articles.findIndex((a) => a.id == articleToDelete);\n    articles.update((n) => {\n      n.splice(deleteIndex, 1);\n      return n;\n    });\n  }\n</script>\n\n{#if $articles}\n  <div class=\"articles\">\n    {#each $articles as article}\n      <Article {article} on:article:deleted={removeArticle} />\n    {/each}\n  </div>\n{/if}\n\n<style>\n  .articles {\n    display: flex;\n    flex-wrap: wrap;\n    justify-content: space-around;\n    margin: 1rem auto;\n    width: 100%;\n  }\n  @media (min-width: 37.5em) {\n    .articles {\n      width: 80%;\n    }\n  }\n</style>\n",
    "<script>\n  import { onMount } from 'svelte';\n  import { articles, user } from './stores.js';\n  import { postJson } from 'simple-fetch';\n  let url, title, description;\n  let isRetrieving = false;\n  async function extract() {\n    if (isRetrieving) {\n      console.log('already being retrieved');\n      return;\n    }\n    isRetrieving = true;\n    title = description = 'Retrieving...';\n    ({ title, description } = await fetch(\n      `${THIRDPARTY_API_URL}/embedly?url=${encodeURIComponent(url)}`\n    ).then((r) => r.json()));\n    if (!title) {\n      title = 'Error - no title found';\n    }\n    // allow description to be set manually\n    if (!description) {\n      description = '';\n    }\n    isRetrieving = false;\n  }\n  $: isSubmittable = !isRetrieving && !!url && !!title;\n\n  async function addArticle(e) {\n    if (!isSubmittable) {\n      return;\n    }\n    e.preventDefault();\n    const newArticle = {\n      id: String(Date.now()),\n      link: url,\n      title,\n      description\n    };\n    const resp = await postJson(`${API_URL}/${COLLECTION}/`, newArticle, {\n      headers: {\n        Authorization: `Bearer ${$user.idToken}`\n      }\n    });\n    articles.update((n) => {\n      n.unshift({\n        ...newArticle,\n        id: resp.id\n      });\n      return n;\n    });\n    // reset\n    url = '';\n    title = undefined;\n    description = undefined;\n  }\n  async function paste() {\n    if (!navigator.clipboard.readText) {\n      return;\n    }\n    const clipText = await navigator.clipboard.readText();\n    url = clipText;\n  }\n</script>\n\n<form class=\"clearfix\">\n  <h2 class=\"title\">Save an article</h2>\n  <div class=\"field\">\n    <label for=\"link\">Link URL</label>\n    <button\n      class=\"input-action before\"\n      type=\"button\"\n      title=\"Paste from clipboard\"\n      on:click={paste}>\n      <i class=\"material-icons\">file_copy</i>\n    </button>\n    <input\n      type=\"url\"\n      class=\"link\"\n      placeholder=\"https://coolstuff.com\"\n      id=\"link\"\n      name=\"link\"\n      bind:value={url}\n      on:change={extract} />\n    <button\n      class=\"input-action after\"\n      type=\"button\"\n      title=\"Retrieve\"\n      disabled={isRetrieving}\n      on:click={extract}>\n      <i class=\"material-icons\">get_app</i>\n    </button>\n  </div>\n  <div class=\"field {title != undefined ? '' : 'inactive'}\">\n    <label for=\"title\">Title</label>\n    <input name=\"title\" type=\"text\" id=\"title\" bind:value={title} />\n  </div>\n  <div class=\"field {description != undefined ? '' : 'inactive'}\">\n    <label for=\"description\">Description</label>\n    <textarea name=\"description\" id=\"description\" bind:value={description} />\n  </div>\n  <input\n    class=\"save-article\"\n    type=\"submit\"\n    disabled={!isSubmittable}\n    on:click={addArticle}\n    value=\"Save\" />\n</form>\n\n<style>\n  form {\n    background-color: #fff;\n    padding: 1em;\n    box-shadow: 0px 0px 5px 0px rgba(0, 0, 0, 0.16),\n      0px 0px 5px 0px rgba(0, 0, 0, 0.23);\n    border-radius: 0 0 3px 3px;\n    margin: 0.5rem auto;\n    width: 100%;\n  }\n  @media (min-width: 37.5em) {\n    form {\n      padding: 2em;\n      margin: 2rem auto;\n      width: 80%;\n    }\n  }\n  .title {\n    font-weight: 300;\n    margin: 0;\n  }\n  .field {\n    display: block;\n    margin: 2em 0;\n  }\n  label {\n    display: block;\n    padding: 1em 0;\n  }\n  @media (min-width: 37.5em) {\n    label {\n      float: left;\n      width: 25%;\n      padding: 1em;\n    }\n  }\n  input,\n  textarea {\n    padding: 1em;\n    vertical-align: middle;\n    width: 100%;\n  }\n  input.link {\n    width: calc(100% - 5.6rem);\n  }\n  @media (min-width: 37.5em) {\n    input,\n    textarea {\n      width: 75%;\n    }\n    input.link {\n      width: calc(75% - 5.6rem);\n    }\n  }\n  .input-action {\n    background-color: var(--divider-color);\n    padding: 5px;\n    width: 2.8rem;\n    height: 2.8rem;\n  }\n  textarea {\n    height: 7em;\n  }\n  button,\n  [type='submit'] {\n    width: auto;\n  }\n  .input-action.before {\n    float: left;\n  }\n  .input-action.after,\n  .save-article {\n    float: right;\n  }\n  .inactive {\n    display: none;\n  }\n  input:disabled {\n    background-color: var(--divider-color);\n    cursor: auto;\n  }\n</style>\n"
  ],
  "names": [],
  "mappings": "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"
}